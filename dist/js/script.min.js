const nextBtn=document.querySelectorAll(".next"),formBlock=document.querySelectorAll(".shipping"),wrapper=document.querySelector(".form__wrapper"),inner=document.querySelector(".slides__inner"),stepElem=document.querySelectorAll(".main__step"),width=window.getComputedStyle(inner).width;let offset=0;inner.style.width=100*formBlock.length+"%",inner.style.transition="0.5s all",inner.style.display="flex",wrapper.style.overflow="hidden",formBlock.forEach(e=>{e.style.width=width}),nextBtn.forEach((e,t)=>{e.addEventListener("click",()=>{let o=!0;if(document.querySelectorAll(".shipping__form")[t].querySelectorAll(".input").forEach(e=>{!1===e.checkValidity()&&(o=!1)}),o)offset===+width.slice(0,width.length-2)*(formBlock.length-1)?offset=0:offset+=+width.slice(0,width.length-2),formBlock[t+1].classList.remove("hidden"),setTimeout(()=>{formBlock[t].classList.add("hidden")},300),inner.style.transform=`translateX(-${offset}px)`;else{const t=document.createElement("div");t.style.color="red",t.textContent="Please, fill in all the fields!",e.parentElement.appendChild(t),setTimeout(()=>{e.parentElement.removeChild(t)},1500)}})}),stepElem.forEach((e,t)=>{e.addEventListener("click",t=>{const o=t.target.getAttribute("data-slide-to");document.querySelectorAll(".shipping"),e.parentElement.querySelectorAll(".main__step")[o].classList.contains("text-active")&&(offset=+width.slice(0,width.length-2)*o,formBlock[o].classList.remove("hidden"),setTimeout(()=>{formBlock[o-1].classList.add("hidden")},300),console.log(offset),inner.style.transform=`translateX(-${offset}px)`)})});const phone=document.querySelectorAll(".phone"),countryShipping=document.querySelector("#shopping_country"),cardNumber=document.querySelector("#payment_card"),cardDate=document.querySelector("#payment_date"),cardCode=document.querySelector("#payment_code");new IMask(cardNumber,{mask:"0000 0000 0000 0000"}),new IMask(cardDate,{mask:"00/00"}),new IMask(cardCode,{mask:"000"}),phone.forEach(e=>{new IMask(e,{mask:"+{38}(000)000-00-00"}),e.setAttribute("placeholder","+38"),e.value="+38"});const form=document.querySelector("#form");bindpostData(form);const postData=async(e,t)=>{const o=await fetch(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:t});return await o.json()};function bindpostData(e){e.addEventListener("submit",t=>{t.preventDefault();const o=new FormData(e),l=JSON.stringify(Object.fromEntries(o.entries()));postData("https://jsonplaceholder.typicode.com/posts",l).then(e=>{console.log(e);const t=document.createElement("div");t.innerHTML=`<div class="shipping bill">\n    <h1 class="form__heading">Thank you for your order!</h1>\n    <p><b>Order number is: 172837837128</b></p>\n    <p>You will receive an email confirmation shortly to <a href="#"><span id="bill-email">${e.billing_email}</span></a></p>\n    <p>Estimated delivery day is <br><b>Friday 1st April 2016</b></p>\n    <button><a href="#">print recipe</a></button>\n</div>`,document.appendChild(t)}).catch(()=>{})})}const editStart=document.querySelector(".order__edit"),deleteElem=document.querySelectorAll(".order__delete"),orderItem=document.querySelectorAll(".order__item"),orderParent=document.querySelector(".order"),itemPrice=document.querySelectorAll(".order__item-price");let totalPrice=document.querySelector(".order__total-price"),totalTaxes=document.querySelector(".order__total-taxes");const totalSum=document.querySelector(".order__total-sum"),toggleEditMode=()=>{deleteElem.forEach(e=>{e.classList.toggle("no-display")}),"edit order"===editStart.textContent?editStart.textContent="Save":editStart.textContent="edit order",editStart.addEventListener("click",toggleEditMode)};let totalPriceValue=totalPrice.textContent.slice(1,totalPrice.textContent.length),totalTaxesValue=totalTaxes.textContent.slice(1,totalTaxes.textContent.length);const deleteElement=e=>{orderParent.removeChild(orderItem[e]);let t=itemPrice[e].textContent;t=t.slice(1,t.length),console.log(t),totalPriceValue=Math.round(totalPriceValue-t),totalTaxesValue=Math.round(totalTaxesValue-4.04),totalPrice.textContent="$"+totalPriceValue,totalTaxes.textContent="$"+totalTaxesValue,totalSum.textContent="$"+ +(totalPriceValue+totalTaxesValue)};editStart.addEventListener("click",toggleEditMode),deleteElem.forEach((e,t)=>{e.addEventListener("click",()=>{deleteElement(t)})});const sameAsShippingBtn=document.querySelector(".form__heading-button");sameAsShippingBtn.addEventListener("click",()=>{document.querySelector("#billing_name").value=document.querySelector("#shipping-name").value,document.querySelector("#billing_country").value=document.querySelector("#shopping_country").value,document.querySelector("#billing-zip").value=document.querySelector("#shipping-zip").value,document.querySelector("#billing_ad_address").value=document.querySelector("#shipping_ad_address").value,document.querySelector("#billing_address").value=document.querySelector("#shipping_address").value,document.querySelector("#billing_city").value=document.querySelector("#shopping_city").value});const billEmail=document.querySelector("#bill-email");billEmail.textContent=document.querySelector("#billing_email").value;